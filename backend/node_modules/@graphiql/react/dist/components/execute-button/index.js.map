{"version":3,"file":"index.js","sources":["../../../src/components/execute-button/index.tsx"],"sourcesContent":["import type { FC } from 'react';\nimport { useGraphiQL, useGraphiQLActions } from '../provider';\nimport { PlayIcon, StopIcon } from '../../icons';\nimport { DropdownMenu } from '../dropdown-menu';\nimport { Tooltip } from '../tooltip';\nimport { KEY_MAP, formatShortcutForOS } from '../../constants';\nimport { pick } from '../../utility';\nimport './index.css';\n\nexport const ExecuteButton: FC = () => {\n  const { setOperationName, run, stop } = useGraphiQLActions();\n  const {\n    operations = [],\n    operationName,\n    isFetching,\n    overrideOperationName,\n  } = useGraphiQL(\n    pick('operations', 'operationName', 'isFetching', 'overrideOperationName'),\n  );\n  const isSubscribed = useGraphiQL(state => Boolean(state.subscription));\n  const hasOptions =\n    operations.length > 1 && typeof overrideOperationName !== 'string';\n  const isRunning = isFetching || isSubscribed;\n\n  const label = `${isRunning ? 'Stop' : 'Execute'} query (${formatShortcutForOS(KEY_MAP.runQuery.key, 'Cmd')})`;\n  const buttonProps = {\n    type: 'button' as const,\n    className: 'graphiql-execute-button',\n    children: isRunning ? <StopIcon /> : <PlayIcon />,\n    'aria-label': label,\n  };\n\n  return hasOptions && !isRunning ? (\n    <DropdownMenu>\n      <Tooltip label={label}>\n        <DropdownMenu.Button {...buttonProps} />\n      </Tooltip>\n\n      <DropdownMenu.Content>\n        {operations.map((operation, i) => {\n          const opName = operation.name\n            ? operation.name.value\n            : `<Unnamed ${operation.operation}>`;\n          return (\n            <DropdownMenu.Item\n              key={`${opName}-${i}`}\n              onSelect={() => {\n                const selectedOperationName = operation.name?.value;\n                if (\n                  selectedOperationName &&\n                  selectedOperationName !== operationName\n                ) {\n                  setOperationName(selectedOperationName);\n                }\n                run();\n              }}\n            >\n              {opName}\n            </DropdownMenu.Item>\n          );\n        })}\n      </DropdownMenu.Content>\n    </DropdownMenu>\n  ) : (\n    <Tooltip label={label}>\n      <button {...buttonProps} onClick={isRunning ? stop : run} />\n    </Tooltip>\n  );\n};\n"],"names":["ExecuteButton","$","_c","setOperationName","run","stop","useGraphiQLActions","t0","Symbol","for","pick","operations","t1","operationName","isFetching","overrideOperationName","useGraphiQL","t2","undefined","isSubscribed","_temp","hasOptions","length","isRunning","label","formatShortcutForOS","KEY_MAP","runQuery","key","t3","t4","type","className","children","buttonProps","t5","map","operation","i","opName","name","value","selectedOperationName","state","Boolean","subscription"],"mappings":"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"}