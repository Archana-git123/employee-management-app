{"version":3,"file":"operation-editor.js","sources":["../../src/components/operation-editor.tsx"],"sourcesContent":["import { getSelectedOperationName } from '@graphiql/toolkit';\nimport type { DocumentNode } from 'graphql';\nimport {\n  getOperationFacts,\n  getContextAtPosition,\n} from 'graphql-language-service';\nimport { FC, useEffect, useRef } from 'react';\nimport { useMonaco } from '../stores';\nimport { useGraphiQL, useGraphiQLActions } from './provider';\nimport {\n  debounce,\n  getOrCreateModel,\n  createEditor,\n  onEditorContainerKeyDown,\n  pick,\n  cleanupDisposables,\n  cn,\n  Uri,\n  Range,\n} from '../utility';\nimport type { MonacoEditor, EditorProps, SchemaReference } from '../types';\nimport {\n  KEY_BINDINGS,\n  URI_NAME,\n  STORAGE_KEY,\n  MONACO_GRAPHQL_DIAGNOSTIC_SETTINGS,\n} from '../constants';\nimport type * as monaco from 'monaco-editor';\nimport { toGraphQLPosition } from 'monaco-graphql/esm/utils.js';\n\ninterface OperationEditorProps extends EditorProps {\n  /**\n   * Invoked when a reference to the GraphQL schema (type or field) is clicked\n   * as part of the editor or one of its tooltips.\n   * @param reference - The reference that has been clicked.\n   */\n  onClickReference?(reference: SchemaReference): void;\n\n  /**\n   * Invoked when the contents of the operation editor change.\n   * @param value - The new contents of the editor.\n   * @param documentAST - The editor contents parsed into a GraphQL document.\n   */\n  onEdit?(value: string, documentAST?: DocumentNode): void;\n}\n\nexport const OperationEditor: FC<OperationEditorProps> = ({\n  onClickReference,\n  onEdit,\n  ...props\n}) => {\n  const {\n    setOperationName,\n    setEditor,\n    updateActiveTabValues,\n    setVisiblePlugin,\n    setSchemaReference,\n    run,\n    setOperationFacts,\n    copyQuery,\n    prettifyEditors,\n    mergeQuery,\n  } = useGraphiQLActions();\n  const {\n    initialQuery,\n    schema,\n    referencePlugin,\n    operations,\n    operationName,\n    externalFragments,\n    uriInstanceId,\n    storage,\n    monacoTheme,\n  } = useGraphiQL(\n    pick(\n      'initialQuery',\n      'schema',\n      'referencePlugin',\n      'operations',\n      'operationName',\n      'externalFragments',\n      'uriInstanceId',\n      'storage',\n      'monacoTheme',\n    ),\n  );\n  const ref = useRef<HTMLDivElement>(null!);\n  const onClickReferenceRef = useRef<OperationEditorProps['onClickReference']>(\n    null!,\n  );\n  useEffect(() => {\n    onClickReferenceRef.current = onClickReference;\n  }, [onClickReference]);\n\n  /*\n  useEffect(() => {\n    void importCodeMirrorImports().then(CodeMirror => {\n      const container = ref.current;\n      const newEditor = CodeMirror(container, {\n        hintOptions: {\n          closeOnUnfocus: false,\n          completeSingle: false,\n          autocompleteOptions: {\n            // for the operation editor, restrict to executable type definitions\n            mode: GraphQLDocumentMode.EXECUTABLE,\n          },\n        },\n        info: {\n          renderDescription: (text: string) => markdown.render(text),\n          onClick(reference: SchemaReference) {\n            onClickReferenceRef(reference);\n          },\n        },\n        jump: {\n          onClick(reference: SchemaReference) {\n            onClickReferenceRef(reference);\n          },\n        },\n      });\n\n      function showHint() {\n        newEditor.showHint({ completeSingle: true, container });\n      }\n\n      newEditor.addKeyMap({\n        'Cmd-Space': showHint,\n        'Ctrl-Space': showHint,\n        'Alt-Space': showHint,\n        'Shift-Space': showHint,\n        'Shift-Alt-Space': showHint,\n      });\n\n      let showingHints = false;\n\n      // fired whenever a hint dialog opens\n      newEditor.on('startCompletion', () => {\n        showingHints = true;\n      });\n\n      // the codemirror hint extension fires this anytime the dialog is closed\n      // via any method (e.g., focus blur, escape key, ...)\n      newEditor.on('endCompletion', () => {\n        showingHints = false;\n      });\n\n      newEditor.on('keydown', (editorInstance, event) => {\n        if (event.key === 'Escape' && showingHints) {\n          event.stopPropagation();\n        }\n      });\n\n      newEditor.on('beforeChange', (editorInstance, change) => {\n        // The update function is only present on non-redo, non-undo events.\n        if (change.origin === 'paste') {\n          const text = change.text.map(normalizeWhitespace);\n          change.update?.(change.from, change.to, text);\n        }\n      });\n    });\n  }, []);\n    */\n\n  function getAndUpdateOperationFacts(editorInstance: MonacoEditor) {\n    const operationFacts = getOperationFacts(schema, editorInstance.getValue());\n    // Update the operation name should any query names change.\n    const newOperationName = getSelectedOperationName(\n      operations,\n      operationName,\n      operationFacts?.operations,\n    );\n    setOperationFacts({\n      documentAST: operationFacts?.documentAST,\n      operationName: newOperationName,\n      operations: operationFacts?.operations,\n    });\n\n    return operationFacts\n      ? { ...operationFacts, operationName: newOperationName }\n      : null;\n  }\n\n  const runAtCursorRef = useRef<monaco.editor.IActionDescriptor['run']>(null!);\n\n  useEffect(() => {\n    runAtCursorRef.current = editor => {\n      if (!operations) {\n        run();\n        return;\n      }\n      const position = editor.getPosition()!;\n      const cursorIndex = editor.getModel()!.getOffsetAt(position);\n\n      // Loop through all operations to see if one contains the cursor.\n      let newOperationName: string | undefined;\n      for (const operation of operations) {\n        if (\n          operation.loc &&\n          operation.loc.start <= cursorIndex &&\n          operation.loc.end >= cursorIndex\n        ) {\n          newOperationName = operation.name?.value;\n        }\n      }\n\n      if (newOperationName && newOperationName !== operationName) {\n        setOperationName(newOperationName);\n      }\n      run();\n    };\n  }, [operationName, operations, run, setOperationName]);\n\n  const { monacoGraphQL, monaco } = useMonaco();\n\n  useEffect(() => {\n    if (!monaco || !monacoGraphQL) {\n      return;\n    }\n    const operationUri = Uri.file(`${uriInstanceId}${URI_NAME.operation}`);\n    const variablesUri = Uri.file(`${uriInstanceId}${URI_NAME.variables}`);\n    /**\n     * Mutate the global `validateVariablesJSON` object to setup which operation editor is validated\n     * by which variables editor. Since we can have multiple GraphiQL instances on the same page.\n     */\n    const { validateVariablesJSON } = MONACO_GRAPHQL_DIAGNOSTIC_SETTINGS;\n    validateVariablesJSON![operationUri.toString()] = [variablesUri.toString()];\n    monacoGraphQL.setDiagnosticSettings(MONACO_GRAPHQL_DIAGNOSTIC_SETTINGS);\n    const model = getOrCreateModel({\n      uri: operationUri.path.replace('/', ''),\n      value: initialQuery,\n    });\n    const editor = createEditor(ref, {\n      model,\n      theme: monacoTheme,\n    });\n    setEditor({ queryEditor: editor });\n\n    // We don't use the generic `useChangeHandler` hook here because we want to\n    // have additional logic that updates the operation facts that we save in `editorStore`\n    const handleChange = debounce(100, () => {\n      const query = editor.getValue();\n      storage.set(STORAGE_KEY.query, query);\n\n      const operationFacts = getAndUpdateOperationFacts(editor);\n      // Invoke callback props only after the operation facts have been updated\n      onEdit?.(query, operationFacts?.documentAST);\n      if (\n        operationFacts?.operationName &&\n        operationName !== operationFacts.operationName\n      ) {\n        setOperationName(operationFacts.operationName);\n      }\n\n      updateActiveTabValues({\n        query,\n        operationName: operationFacts?.operationName ?? null,\n      });\n    });\n    // Call once to initially update the values\n    getAndUpdateOperationFacts(editor);\n\n    const disposables = [\n      model.onDidChangeContent(handleChange),\n      editor.addAction({\n        ...KEY_BINDINGS.runQuery,\n        run: (...args) => runAtCursorRef.current(...args),\n      }),\n      editor.addAction({ ...KEY_BINDINGS.copyQuery, run: copyQuery }),\n      editor.addAction({ ...KEY_BINDINGS.prettify, run: prettifyEditors }),\n      editor.addAction({ ...KEY_BINDINGS.mergeFragments, run: mergeQuery }),\n      editor,\n      model,\n    ];\n    return cleanupDisposables(disposables);\n  }, [monaco, monacoGraphQL]); // eslint-disable-line react-hooks/exhaustive-deps -- only on mount\n\n  useEffect(() => {\n    if (!schema || !monaco || !monacoGraphQL) {\n      return;\n    }\n    monacoGraphQL.setSchemaConfig([\n      { uri: `${uriInstanceId}${URI_NAME.schema}`, schema },\n    ]);\n    monacoGraphQL.setExternalFragmentDefinitions([\n      ...externalFragments.values(),\n    ]);\n    if (!referencePlugin) {\n      return;\n    }\n\n    let currentSchemaReference: SchemaReference | null = null;\n\n    const disposables = [\n      monaco.languages.registerDefinitionProvider('graphql', {\n        provideDefinition(model, position, _token) {\n          const graphQLPosition = toGraphQLPosition(position);\n          const context = getContextAtPosition(\n            model.getValue(),\n            graphQLPosition,\n            schema,\n          );\n          if (!context) {\n            return;\n          }\n          const { typeInfo, token } = context;\n          const { kind, step } = token.state;\n\n          if (\n            (kind === 'Field' && step === 0 && typeInfo.fieldDef) ||\n            (kind === 'AliasedField' && step === 2 && typeInfo.fieldDef) ||\n            (kind === 'ObjectField' && step === 0 && typeInfo.fieldDef) ||\n            (kind === 'Directive' && step === 1 && typeInfo.directiveDef) ||\n            (kind === 'Variable' && typeInfo.type) ||\n            (kind === 'Argument' && step === 0 && typeInfo.argDef) ||\n            (kind === 'EnumValue' &&\n              typeInfo.enumValue &&\n              'description' in typeInfo.enumValue) ||\n            (kind === 'NamedType' &&\n              typeInfo.type &&\n              'description' in typeInfo.type)\n          ) {\n            currentSchemaReference = { kind, typeInfo };\n            const { lineNumber, column } = position;\n            const range = new Range(lineNumber, column, lineNumber, column);\n            return [{ uri: model.uri, range }];\n          }\n          currentSchemaReference = null;\n        },\n      }),\n      monaco.languages.registerReferenceProvider('graphql', {\n        provideReferences(model, { lineNumber, column }, _context, _token) {\n          if (!currentSchemaReference) {\n            return;\n          }\n          setVisiblePlugin(referencePlugin);\n          setSchemaReference(currentSchemaReference);\n          onClickReferenceRef.current?.(currentSchemaReference);\n\n          const range = new Range(lineNumber, column, lineNumber, column);\n          return [{ uri: model.uri, range }];\n        },\n      }),\n    ];\n    return cleanupDisposables(disposables);\n  }, [\n    schema,\n    referencePlugin,\n    setSchemaReference,\n    setVisiblePlugin,\n    externalFragments,\n    uriInstanceId,\n    monacoGraphQL,\n    monaco,\n  ]);\n\n  return (\n    <div\n      ref={ref}\n      tabIndex={0}\n      onKeyDown={onEditorContainerKeyDown}\n      {...props}\n      className={cn('graphiql-editor', props.className)}\n    />\n  );\n};\n"],"names":["OperationEditor","t0","$","_c","onClickReference","onEdit","props","setOperationName","setEditor","updateActiveTabValues","setVisiblePlugin","setSchemaReference","run","setOperationFacts","copyQuery","prettifyEditors","mergeQuery","useGraphiQLActions","t1","Symbol","for","pick","initialQuery","schema","referencePlugin","operations","operationName","externalFragments","uriInstanceId","storage","monacoTheme","useGraphiQL","ref","useRef","onClickReferenceRef","t2","t3","current","useEffect","t4","getAndUpdateOperationFacts","editorInstance","operationFacts","getOperationFacts","getValue","newOperationName","getSelectedOperationName","documentAST","runAtCursorRef","t5","t6","editor","position","getPosition","cursorIndex","getModel","getOffsetAt","operation","loc","start","end","name","value","monacoGraphQL","monaco","useMonaco","t7","operationUri","Uri","file","URI_NAME","variablesUri","variables","validateVariablesJSON","MONACO_GRAPHQL_DIAGNOSTIC_SETTINGS","toString","setDiagnosticSettings","model","getOrCreateModel","uri","path","replace","editor_0","createEditor","theme","queryEditor","handleChange","debounce","query","set","STORAGE_KEY","operationFacts_0","disposables","onDidChangeContent","addAction","KEY_BINDINGS","runQuery","t8","args","prettify","mergeFragments","cleanupDisposables","t10","t9","setSchemaConfig","setExternalFragmentDefinitions","values","currentSchemaReference","disposables_0","languages","registerDefinitionProvider","provideDefinition","model_0","position_0","_token","graphQLPosition","toGraphQLPosition","context","getContextAtPosition","typeInfo","token","kind","step","state","fieldDef","directiveDef","type","argDef","enumValue","lineNumber","column","range","Range","registerReferenceProvider","provideReferences","model_1","t11","_context","_token_0","lineNumber_0","column_0","range_0","className","cn","t12","onEditorContainerKeyDown"],"mappings":"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"}