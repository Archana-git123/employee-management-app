{"version":3,"file":"doc-explorer.js","sources":["../../src/components/doc-explorer.tsx"],"sourcesContent":["import { isType } from 'graphql';\nimport type { FC, ReactNode } from 'react';\nimport { ChevronLeftIcon, Spinner, useGraphiQL, pick } from '@graphiql/react';\nimport { useDocExplorer, useDocExplorerActions } from '../context';\nimport { FieldDocumentation } from './field-documentation';\nimport { SchemaDocumentation } from './schema-documentation';\nimport { Search } from './search';\nimport { TypeDocumentation } from './type-documentation';\nimport './doc-explorer.css';\n\nexport const DocExplorer: FC = () => {\n  const { fetchError, isIntrospecting, schema, validationErrors } = useGraphiQL(\n    pick('fetchError', 'isIntrospecting', 'schema', 'validationErrors'),\n  );\n  const explorerNavStack = useDocExplorer();\n  const { pop } = useDocExplorerActions();\n  const navItem = explorerNavStack.at(-1)!;\n\n  let content: ReactNode = null;\n  if (fetchError) {\n    content = (\n      <div className=\"graphiql-doc-explorer-error\">Error fetching schema</div>\n    );\n  } else if (validationErrors[0]) {\n    content = (\n      <div className=\"graphiql-doc-explorer-error\">\n        Schema is invalid: {validationErrors[0].message}\n      </div>\n    );\n  } else if (isIntrospecting) {\n    // Schema is undefined when it is being loaded via introspection.\n    content = <Spinner />;\n  } else if (!schema) {\n    // Schema is null when it explicitly does not exist, typically due to\n    // an error during introspection.\n    content = (\n      <div className=\"graphiql-doc-explorer-error\">\n        No GraphQL schema available\n      </div>\n    );\n  } else if (explorerNavStack.length === 1) {\n    content = <SchemaDocumentation schema={schema} />;\n  } else if (isType(navItem.def)) {\n    content = <TypeDocumentation type={navItem.def} />;\n  } else if (navItem.def) {\n    content = <FieldDocumentation field={navItem.def} />;\n  }\n\n  let prevName;\n  if (explorerNavStack.length > 1) {\n    prevName = explorerNavStack.at(-2)!.name;\n  }\n\n  return (\n    <section\n      className=\"graphiql-doc-explorer\"\n      aria-label=\"Documentation Explorer\"\n    >\n      <div className=\"graphiql-doc-explorer-header\">\n        <div className=\"graphiql-doc-explorer-header-content\">\n          {prevName && (\n            <a\n              href=\"#\"\n              className=\"graphiql-doc-explorer-back\"\n              onClick={event => {\n                event.preventDefault();\n                pop();\n              }}\n              aria-label={`Go back to ${prevName}`}\n            >\n              <ChevronLeftIcon />\n              {prevName}\n            </a>\n          )}\n          <div className=\"graphiql-doc-explorer-title\">{navItem.name}</div>\n        </div>\n        <Search key={navItem.name} />\n      </div>\n      <div className=\"graphiql-doc-explorer-content\">{content}</div>\n    </section>\n  );\n};\n"],"names":["DocExplorer","$","_c","t0","Symbol","for","pick","fetchError","isIntrospecting","schema","validationErrors","useGraphiQL","explorerNavStack","useDocExplorer","pop","useDocExplorerActions","content","navItem","at","t1","message","length","isType","def","prevName","event","preventDefault","t2","name","t3","t4","t5","t6","t7"],"mappings":"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"}