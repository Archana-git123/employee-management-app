{"version":3,"file":"schema-reference.js","sources":["../src/schema-reference.ts"],"sourcesContent":["import { getNamedType } from 'graphql';\nimport type {\n  GraphQLEnumType,\n  GraphQLNamedType,\n  GraphQLField,\n  GraphQLArgument,\n  GraphQLDirective,\n  GraphQLSchema,\n  GraphQLEnumValue,\n  GraphQLInputFieldMap,\n  GraphQLInputType,\n  GraphQLType,\n} from 'graphql';\nimport type { Maybe } from 'graphql/jsutils/Maybe';\n\n/**\n * Copied from packages/codemirror-graphql/src/jump.ts\n */\nexport function getSchemaReference(kind: string, typeInfo: any) {\n  if (\n    (kind === 'Field' && typeInfo.fieldDef) ||\n    (kind === 'AliasedField' && typeInfo.fieldDef)\n  ) {\n    return getFieldReference(typeInfo);\n  }\n  if (kind === 'Directive' && typeInfo.directiveDef) {\n    return getDirectiveReference(typeInfo);\n  }\n  if (kind === 'Argument' && typeInfo.argDef) {\n    return getArgumentReference(typeInfo);\n  }\n  if (kind === 'EnumValue' && typeInfo.enumValue) {\n    return getEnumValueReference(typeInfo);\n  }\n  if (kind === 'NamedType' && typeInfo.type) {\n    return getTypeReference(typeInfo);\n  }\n}\n\nfunction getArgumentReference(typeInfo: any): ArgumentReference {\n  return typeInfo.directiveDef\n    ? {\n        kind: 'Argument',\n        schema: typeInfo.schema,\n        argument: typeInfo.argDef,\n        directive: typeInfo.directiveDef,\n      }\n    : {\n        kind: 'Argument',\n        schema: typeInfo.schema,\n        argument: typeInfo.argDef,\n        field: typeInfo.fieldDef,\n        type: isMetaField(typeInfo.fieldDef) ? null : typeInfo.parentType,\n      };\n}\n\nfunction getDirectiveReference(typeInfo: any): DirectiveReference {\n  return {\n    kind: 'Directive',\n    schema: typeInfo.schema,\n    directive: typeInfo.directiveDef,\n  };\n}\n\nfunction getFieldReference(typeInfo: any): FieldReference {\n  return {\n    kind: 'Field',\n    schema: typeInfo.schema,\n    field: typeInfo.fieldDef,\n    type: isMetaField(typeInfo.fieldDef) ? null : typeInfo.parentType,\n  };\n}\n\n// Note: for reusability, getTypeReference can produce a reference to any type,\n// though it defaults to the current type.\nfunction getTypeReference(\n  typeInfo: any,\n  type?: Maybe<GraphQLNamedType>,\n): TypeReference {\n  return {\n    kind: 'Type',\n    schema: typeInfo.schema,\n    type: type || typeInfo.type,\n  };\n}\n\nfunction getEnumValueReference(typeInfo: TypeInfo): EnumValueReference {\n  return {\n    kind: 'EnumValue',\n    value: typeInfo.enumValue || undefined,\n    type: typeInfo.inputType\n      ? (getNamedType(typeInfo.inputType) as GraphQLEnumType)\n      : undefined,\n  };\n}\n\nfunction isMetaField(fieldDef: GraphQLField<unknown, unknown>) {\n  return fieldDef.name.slice(0, 2) === '__';\n}\n\ntype ArgumentReference = {\n  kind: 'Argument';\n  argument: GraphQLArgument;\n  field?: GraphQLField<unknown, unknown>;\n  type?: GraphQLNamedType;\n  directive?: GraphQLDirective;\n  schema?: GraphQLSchema;\n};\n\ntype DirectiveReference = {\n  kind: 'Directive';\n  directive: GraphQLDirective;\n  schema?: GraphQLSchema;\n};\n\ntype EnumValueReference = {\n  kind: 'EnumValue';\n  value?: GraphQLEnumValue;\n  type?: GraphQLEnumType;\n  schema?: GraphQLSchema;\n};\n\ntype FieldReference = {\n  kind: 'Field';\n  field: GraphQLField<unknown, unknown>;\n  type: Maybe<GraphQLNamedType>;\n  schema?: GraphQLSchema;\n};\n\ntype TypeReference = {\n  kind: 'Type';\n  type: GraphQLNamedType;\n  schema?: GraphQLSchema;\n};\n\ninterface TypeInfo {\n  schema: GraphQLSchema;\n  type?: Maybe<GraphQLType>;\n  parentType?: Maybe<GraphQLType>;\n  inputType?: Maybe<GraphQLInputType>;\n  directiveDef?: Maybe<GraphQLDirective>;\n  fieldDef?: Maybe<GraphQLField<unknown, unknown>>;\n  argDef?: Maybe<GraphQLArgument>;\n  argDefs?: Maybe<GraphQLArgument[]>;\n  enumValue?: Maybe<GraphQLEnumValue>;\n  objectFieldDefs?: Maybe<GraphQLInputFieldMap>;\n}\n"],"names":["getSchemaReference","kind","typeInfo","fieldDef","getFieldReference","directiveDef","getDirectiveReference","argDef","getArgumentReference","enumValue","getEnumValueReference","type","getTypeReference","schema","argument","directive","field","isMetaField","parentType","value","undefined","inputType","getNamedType","name","slice"],"mappings":";AAkBgBA,SAAAA,mBAAmBC,MAAcC,UAAe;AAC9D,MACGD,SAAS,WAAWC,SAASC,YAC7BF,SAAS,kBAAkBC,SAASC,UACrC;AACA,WAAOC,kBAAkBF,QAAQ;AAAA,EAAA;AAE/BD,MAAAA,SAAS,eAAeC,SAASG,cAAc;AACjD,WAAOC,sBAAsBJ,QAAQ;AAAA,EAAA;AAEnCD,MAAAA,SAAS,cAAcC,SAASK,QAAQ;AAC1C,WAAOC,qBAAqBN,QAAQ;AAAA,EAAA;AAElCD,MAAAA,SAAS,eAAeC,SAASO,WAAW;AAC9C,WAAOC,sBAAsBR,QAAQ;AAAA,EAAA;AAEnCD,MAAAA,SAAS,eAAeC,SAASS,MAAM;AACzC,WAAOC,iBAAiBV,QAAQ;AAAA,EAAA;AAEpC;AAEA,SAASM,qBAAqBN,UAAkC;AAC9D,SAAOA,SAASG,eACZ;AAAA,IACEJ,MAAM;AAAA,IACNY,QAAQX,SAASW;AAAAA,IACjBC,UAAUZ,SAASK;AAAAA,IACnBQ,WAAWb,SAASG;AAAAA,EAAAA,IAEtB;AAAA,IACEJ,MAAM;AAAA,IACNY,QAAQX,SAASW;AAAAA,IACjBC,UAAUZ,SAASK;AAAAA,IACnBS,OAAOd,SAASC;AAAAA,IAChBQ,MAAMM,YAAYf,SAASC,QAAQ,IAAI,OAAOD,SAASgB;AAAAA,EACzD;AACN;AAEA,SAASZ,sBAAsBJ,UAAmC;AACzD,SAAA;AAAA,IACLD,MAAM;AAAA,IACNY,QAAQX,SAASW;AAAAA,IACjBE,WAAWb,SAASG;AAAAA,EACtB;AACF;AAEA,SAASD,kBAAkBF,UAA+B;AACjD,SAAA;AAAA,IACLD,MAAM;AAAA,IACNY,QAAQX,SAASW;AAAAA,IACjBG,OAAOd,SAASC;AAAAA,IAChBQ,MAAMM,YAAYf,SAASC,QAAQ,IAAI,OAAOD,SAASgB;AAAAA,EACzD;AACF;AAIA,SAASN,iBACPV,UACAS,MACe;AACR,SAAA;AAAA,IACLV,MAAM;AAAA,IACNY,QAAQX,SAASW;AAAAA,IACjBF,MAAMA,QAAQT,SAASS;AAAAA,EACzB;AACF;AAEA,SAASD,sBAAsBR,UAAwC;AAC9D,SAAA;AAAA,IACLD,MAAM;AAAA,IACNkB,OAAOjB,SAASO,aAAaW;AAAAA,IAC7BT,MAAMT,SAASmB,YACVC,aAAapB,SAASmB,SAAS,IAChCD;AAAAA,EACN;AACF;AAEA,SAASH,YAAYd,UAA0C;AAC7D,SAAOA,SAASoB,KAAKC,MAAM,GAAG,CAAC,MAAM;AACvC;"}